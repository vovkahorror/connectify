"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[454],{8454:function(e,s,t){t.r(s),t.d(s,{default:function(){return J}});var n=t(8489),a=t(7853),r=t(4531),i=t(1020),o=t(804),u=t(8281),c=t(2791),l="DialogItem_dialogItem__QQXtt",d="DialogItem_active__M+faD",h="DialogItem_photo__q8K1n",m="DialogItem_lastActivityDate__Az5K+",g="DialogItem_newMessagesCount__BU0xr",f=t(2426),_=t(6939),p=t(4286),v=t(184),x=function(e){var s=e.userName,t=e.userPhoto,n=e.id,a=e.lastDialogActivityDate,r=e.newMessagesCount,i="/dialogs/".concat(n),o=(0,p.Yy)(a),u=(0,p.Wn)(o),c=(0,p.md)(o);return(0,v.jsxs)(f.OL,{className:l,activeClassName:d,to:i,children:[(0,v.jsx)("img",{className:h,src:t||_.Z,alt:"userPhoto"}),(0,v.jsx)("span",{children:s}),(0,v.jsxs)("span",{className:m,children:[(0,v.jsx)("span",{children:u}),(0,v.jsx)("span",{children:c})]}),!!r&&(0,v.jsx)("span",{className:g,children:r})]})},D="DialogsList_dialogsList__bxiuy",j=function(e){var s=e.state.dialogsData.map((function(e){return(0,v.jsx)(x,{userName:e.userName,userPhoto:e.photos.large,lastDialogActivityDate:e.lastDialogActivityDate,id:e.id,newMessagesCount:e.newMessagesCount},e.id)}));return(0,v.jsx)("div",{className:D,children:s})},M=t(6139),Z=t(704),y=t(1117),N=t(3079),I=(0,N.D)(70),C=(0,Z.Z)({form:"dialogAddMessageForm"})((function(e){return(0,v.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,v.jsx)("div",{children:(0,v.jsx)(M.Z,{component:y.gx,name:"newMessageBody",validate:[N.C,I],placeholder:"Enter your message"})}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{children:"Send"})})]})})),L="Message_messageBlock__Ql1s6",P="Message_ownerMessageBlock__UuiGu",w="Message_messageContent__Y+-2m",U="Message_messageText__s1Meb",b="Message_photo__fdZw0",A=function(e){var s=e.message,t=e.senderID,n=(e.userID,e.userPhoto),a=e.authUserID,r=e.authUserPhoto,i=t===a,o=(i?r:n)||_.Z;return(0,v.jsxs)("div",{className:i?P:L,children:[(0,v.jsx)("img",{className:b,src:o,alt:""}),(0,v.jsx)("div",{className:w,children:(0,v.jsx)("span",{className:U,children:s})})]})},k="MessagesList_messagesList__OTgzv",q="MessagesList_messagesListHeader__GWLY1",F="MessagesList_userPhoto__0QJFq",S="MessagesList_userInfo__DeXKp",B="MessagesList_userName__S5ks1",E="MessagesList_userActivity__CnzIS",G="MessagesList_messagesListBody__CBIRN",Y=function(e){var s,t,n,a=e.state,r=e.userID,i=e.authUserID,o=e.authUserPhoto,u=e.requestMessages,l=e.sendMessage,d=null===(s=a.dialogsData.find((function(e){return e.id===r})))||void 0===s?void 0:s.userName,h=null===(t=a.dialogsData.find((function(e){return e.id===r})))||void 0===t?void 0:t.photos.large,m=null===(n=a.dialogsData.find((function(e){return e.id===r})))||void 0===n?void 0:n.lastUserActivityDate,g=m&&(0,p.Yy)(m),x=g&&(0,p.Wn)(g),D=g&&(0,p.md)(g),j=a.messagesData.map((function(e){return(0,v.jsx)(A,{message:e.body,senderID:e.senderId,userID:r,userPhoto:h,authUserID:i,authUserPhoto:o},e.id)}));return(0,c.useEffect)((function(){r&&u(r)}),[r]),(0,v.jsxs)("div",{className:k,children:[(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)(f.OL,{className:B,to:"/profile/".concat(r),children:(0,v.jsx)("img",{className:F,src:h||_.Z,alt:""})}),(0,v.jsxs)("div",{className:S,children:[(0,v.jsx)(f.OL,{className:B,to:"/profile/".concat(r),children:(0,v.jsx)("h2",{className:B,children:d})}),(0,v.jsxs)("span",{className:E,children:["Was online on ",x," at ",D]})]})]}),(0,v.jsx)("div",{className:G,children:j}),(0,v.jsx)(C,{onSubmit:function(e){l(r,e.newMessageBody)}})]})},K="Dialogs_dialogs__DK6nC",O=t(9723),W=function(e){var s=e.userID,t=e.dialogsPage,n=e.authUserID,a=e.authUserPhoto,r=e.requestMessages,i=e.sendMessage,o=(0,O.k6)(),u=t;return(0,c.useEffect)((function(){u.dialogsData.length&&o.push("/dialogs/".concat(u.dialogsData[0].id))}),[]),(0,v.jsxs)("div",{className:K,children:[(0,v.jsx)(j,{state:u}),(0,v.jsx)(Y,{state:u,userID:s,authUserPhoto:a,authUserID:n,requestMessages:r,sendMessage:i})]})},z=t(7375),Q=t(2789),T=t(2932),X=t(1638),$=function(e){(0,i.Z)(t,e);var s=(0,o.Z)(t);function t(){return(0,a.Z)(this,t),s.apply(this,arguments)}return(0,r.Z)(t,[{key:"componentDidMount",value:function(){this.props.requestDialogs()}},{key:"render",value:function(){var e=+this.props.match.params.userID;return(0,v.jsxs)(v.Fragment,{children:[this.props.isFetching?(0,v.jsx)(X.p,{}):null,(0,v.jsx)(W,(0,n.Z)({userID:e},this.props))]})}}]),t}(c.Component),J=(0,Q.qC)((0,z.$j)((function(e){return{dialogsPage:e.dialogsPage,authUserID:e.auth.id,authUserPhoto:e.auth.photo,isFetching:e.app.isFetching}}),{requestDialogs:u.pY,requestMessages:u.$4,sendMessage:u.bG}),O.EN,T.D)($)},1117:function(e,s,t){t.d(s,{gx:function(){return h},II:function(){return m},Gr:function(){return g}});var n=t(8489),a=t(3738),r=t(6139),i=t(9234),o=(t(2791),t(9191)),u=t(184),c=["input","meta"],l=["input","meta"],d=function(e){e.input;var s=e.meta,t=s.touched,n=s.error,a=e.children,r=t&&n;return(0,u.jsxs)("div",{className:i.Z.formControl+" "+(r?i.Z.error:""),children:[(0,u.jsx)("div",{children:a}),r&&(0,u.jsx)("span",{children:n})]})},h=function(e){var s=e.input,t=(e.meta,(0,a.Z)(e,c));return(0,u.jsx)(d,(0,n.Z)((0,n.Z)({},e),{},{children:(0,u.jsx)(o.Z,(0,n.Z)((0,n.Z)({},s),t))}))},m=function(e){var s=e.input,t=(e.meta,(0,a.Z)(e,l));return(0,u.jsx)(d,(0,n.Z)((0,n.Z)({},e),{},{children:(0,u.jsx)("input",(0,n.Z)((0,n.Z)({},s),t))}))},g=function(e,s,t,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return(0,u.jsx)(r.Z,(0,n.Z)({placeholder:e,name:s,type:t,validate:a,component:i},o))}},2932:function(e,s,t){t.d(s,{D:function(){return f}});var n=t(8489),a=t(3738),r=t(7853),i=t(4531),o=t(1020),u=t(804),c=t(2791),l=t(9723),d=t(7375),h=t(184),m=["isAuth"],g=function(e){return{isAuth:e.auth.isAuth}};function f(e){var s=function(s){(0,o.Z)(c,s);var t=(0,u.Z)(c);function c(){return(0,r.Z)(this,c),t.apply(this,arguments)}return(0,i.Z)(c,[{key:"render",value:function(){var s=this.props,t=s.isAuth,r=(0,a.Z)(s,m);return t?(0,h.jsx)(e,(0,n.Z)({},r)):(0,h.jsx)(l.l_,{to:"/login"})}}]),c}(c.Component);return(0,d.$j)(g)(s)}},4286:function(e,s,t){t.d(s,{Yy:function(){return n},Wn:function(){return a},md:function(){return r}});var n=function(e){var s=new Date(e),t=Math.abs(s.getTimezoneOffset());return s.setMinutes(s.getMinutes()+t),s},a=function(e){return new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})},r=function(e){return new Date(e).toLocaleTimeString("en-GB",{hour:"numeric",minute:"numeric",hour12:!1})}},3079:function(e,s,t){t.d(s,{C:function(){return n},D:function(){return a}});var n=function(e){return e?void 0:"Field is required"},a=function(e){return function(s){return s.length>e?"Max length is ".concat(e," symbols"):void 0}}},9234:function(e,s){s.Z={formControl:"FormsControls_formControl__7Kujw",error:"FormsControls_error__VtPjP",formSummaryError:"FormsControls_formSummaryError__u1JdX"}}}]);
//# sourceMappingURL=454.02afe08c.chunk.js.map