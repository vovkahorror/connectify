"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[259],{5376:function(e,t,r){r.d(t,{r:function(){return u}});var s,n=r(2791),a=["title","titleId"];function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function l(e,t){var r=e.title,l=e.titleId,u=o(e,a);return n.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"#ffffff",viewBox:"0 0 512 512",ref:t,"aria-labelledby":l},u),r?n.createElement("title",{id:l},r):null,s||(s=n.createElement("path",{d:"M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"})))}var u=n.forwardRef(l);r.p},3259:function(e,t,r){r.r(t),r.d(t,{default:function(){return we}});var s,n=r(8489),a=r(7853),i=r(4531),o=r(1020),l=r(804),u=r(8281),c=r(2791),d="DialogItem_dialogItem__QQXtt",f="DialogItem_active__M+faD",m="DialogItem_photo__q8K1n",g="DialogItem_lastActivityDate__Az5K+",h="DialogItem_newMessagesCount__BU0xr",p=r(2426),v=r(6939),y=r(4286),_=r(184),j=function(e){var t=e.userName,r=e.userPhoto,s=e.id,n=e.lastDialogActivityDate,a=e.newMessagesCount,i="/dialogs/".concat(s),o=(0,y.Yy)(n),l=(0,y.Wn)(o),u=(0,y.md)(o);return(0,_.jsxs)(p.OL,{className:d,activeClassName:f,to:i,children:[(0,_.jsx)("img",{className:m,src:r||v.Z,alt:"userPhoto"}),(0,_.jsx)("span",{children:t}),(0,_.jsxs)("span",{className:g,children:[(0,_.jsx)("span",{children:l}),(0,_.jsx)("span",{children:u})]}),!!a&&(0,_.jsx)("span",{className:h,children:a})]})},x="DialogsList_dialogsList__bxiuy",b=function(e){var t=e.state.dialogsData.map((function(e){return(0,_.jsx)(j,{userName:e.userName,userPhoto:e.photos.large,lastDialogActivityDate:e.lastDialogActivityDate,id:e.id,newMessagesCount:e.newMessagesCount},e.id)}));return(0,_.jsx)("div",{className:x,children:t})},w=r(3430),D=r(6139),M=r(704),O=r(1117),I=r(5376),N=["title","titleId"];function Z(){return Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Z.apply(this,arguments)}function C(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function P(e,t){var r=e.title,n=e.titleId,a=C(e,N);return c.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:"500px",height:"500px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":n},a),r?c.createElement("title",{id:n},r):null,s||(s=c.createElement("g",{transform:"translate(0 -7.5)"},c.createElement("circle",{cx:50,cy:41,r:10,fill:"#ffffff"},c.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",repeatCount:"indefinite",keyTimes:"0;1",values:"0 50 50;360 50 50"}),c.createElement("animate",{attributeName:"r",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;1",values:"0;15;0",keySplines:"0.2 0 0.8 1;0.2 0 0.8 1"})),c.createElement("circle",{cx:50,cy:41,r:10,fill:"#ffffff"},c.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",repeatCount:"indefinite",keyTimes:"0;1",values:"180 50 50;540 50 50"}),c.createElement("animate",{attributeName:"r",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keyTimes:"0;0.5;1",values:"15;0;15",keySplines:"0.2 0 0.8 1;0.2 0 0.8 1"})))))}var L,E=c.forwardRef(P),k=(r.p,"AddMessageForm_form__jMggv"),A="AddMessageForm_textareaWrapper__6DX80",S="AddMessageForm_counter__Y65fY",U="AddMessageForm_sendButton__T0Msu",B="AddMessageForm_sendIcon__gIYvh",F=(0,M.Z)({form:"dialogAddMessageForm"})((function(e){var t=e.handleSubmit,r=e.initialValues.isRequesting,s=(0,c.useState)(""),n=(0,w.Z)(s,2),a=n[0],i=n[1];return(0,_.jsxs)("form",{className:k,onSubmit:t,children:[(0,_.jsxs)("div",{className:A,children:[(0,_.jsx)(D.Z,{component:O.gx,name:"newMessageBody",placeholder:"Enter your message",maxLength:1e3,onInput:function(e){i(e.currentTarget.value.slice(0,1e3))},autoFocus:!0}),a.length>900&&(0,_.jsxs)("span",{className:S,children:[a.length," / 1000"]})]}),(0,_.jsx)("button",{className:U,disabled:!a.length,children:r?(0,_.jsx)(E,{className:B}):(0,_.jsx)(I.r,{className:B})})]})})),T="Message_messageBlock__Ql1s6",q="Message_ownerMessageBlock__UuiGu",z="Message_messageContent__Y+-2m",R="Message_messageText__s1Meb",Y="Message_messageDate__8XFKj",H="Message_eyeIcon__TWvs9",W="Message_photo__fdZw0",X=["title","titleId"];function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},G.apply(this,arguments)}function V(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function K(e,t){var r=e.title,s=e.titleId,n=V(e,X);return c.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",fill:"#ffffff",viewBox:"0 0 576 512",ref:t,"aria-labelledby":s},n),r?c.createElement("title",{id:s},r):null,L||(L=c.createElement("path",{d:"M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"})))}var Q,$=c.forwardRef(K),J=(r.p,["title","titleId"]);function ee(){return ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ee.apply(this,arguments)}function te(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function re(e,t){var r=e.title,s=e.titleId,n=te(e,J);return c.createElement("svg",ee({xmlns:"http://www.w3.org/2000/svg",fill:"#ffffff",viewBox:"0 0 640 512",ref:t,"aria-labelledby":s},n),r?c.createElement("title",{id:s},r):null,Q||(Q=c.createElement("path",{d:"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"})))}var se=c.forwardRef(re),ne=(r.p,function(e){var t=e.message,r=e.senderID,s=e.addedAt,n=e.viewed,a=e.userPhoto,i=e.authUserID,o=e.authUserPhoto,l=r===i,u=(l?o:a)||v.Z,c=(0,y.Yy)(s),d=(0,y.Wn)(c),f=(0,y.md)(c);return(0,_.jsxs)("div",{className:l?q:T,children:[(0,_.jsx)("img",{className:W,src:u,alt:""}),(0,_.jsxs)("div",{className:z,children:[(0,_.jsx)("span",{className:R,children:t}),(0,_.jsxs)("div",{className:Y,children:[(0,_.jsx)("span",{children:d}),(0,_.jsx)("span",{children:f})]}),l&&(n?(0,_.jsx)($,{className:H}):(0,_.jsx)(se,{className:H}))]})]})}),ae=r(165),ie={messagesList:"MessagesList_messagesList__OTgzv",messagesListBody:"MessagesList_messagesListBody__CBIRN"},oe="MessagesListHeader_messagesListHeader__0tQbt",le="MessagesListHeader_userPhoto__XGNwH",ue="MessagesListHeader_userInfo__eDj1Z",ce="MessagesListHeader_userName__pUJDv",de="MessagesListHeader_userActivity__eXd+5",fe=function(e){var t=e.userID,r=e.userPhoto,s=e.userName,n=e.lastUserActivityDate,a=n&&(0,y.Yy)(n),i=a&&(0,y.Wn)(a),o=a&&(0,y.md)(a);return(0,_.jsxs)("div",{className:oe,children:[(0,_.jsx)(p.OL,{className:ce,to:"/profile/".concat(t),children:(0,_.jsx)("img",{className:le,src:r||v.Z,alt:""})}),(0,_.jsxs)("div",{className:ue,children:[(0,_.jsx)(p.OL,{className:ce,to:"/profile/".concat(t),children:(0,_.jsx)("h2",{className:ce,children:s})}),(0,_.jsxs)("span",{className:de,children:["Was online on ",i," at ",o]})]})]})},me=function(e){var t,r,s,n=e.state,a=e.userID,i=e.authUserID,o=e.authUserPhoto,l=e.requestMessages,u=e.sendMessage,d=e.reset,f=null===(t=n.dialogsData.find((function(e){return e.id===a})))||void 0===t?void 0:t.userName,m=null===(r=n.dialogsData.find((function(e){return e.id===a})))||void 0===r?void 0:r.photos.large,g=null===(s=n.dialogsData.find((function(e){return e.id===a})))||void 0===s?void 0:s.lastUserActivityDate,h=(0,c.useRef)(null),p=(0,c.useState)(!1),v=(0,w.Z)(p,2),y=v[0],j=v[1],x=(0,c.useState)(!1),b=(0,w.Z)(x,2),D=b[0],M=b[1],O=n.messagesData.items.map((function(e){return(0,_.jsx)(ne,{message:e.body,senderID:e.senderId,addedAt:e.addedAt,viewed:e.viewed,userPhoto:m,authUserID:i,authUserPhoto:o},e.id)}));return(0,c.useEffect)((function(){a&&(M(!0),l(a).then((function(){var e;return null===(e=h.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})})).catch((function(e){return alert(e.message)})).finally((function(){return M(!1)})))}),[a]),(0,_.jsx)("div",{className:ie.messagesList,children:D?(0,_.jsx)(ae.r,{className:ie.preloaderIcon}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(fe,{userID:a,userPhoto:m,userName:f,lastUserActivityDate:g}),(0,_.jsxs)("div",{className:ie.messagesListBody,children:[O,(0,_.jsx)("div",{ref:h})]}),(0,_.jsx)(F,{initialValues:{isRequesting:y},onSubmit:function(e){e.newMessageBody.trim()&&(j(!0),u(a,e.newMessageBody).then((function(){return l(a)})).then((function(){var e;return null===(e=h.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})})).catch((function(e){return alert(e.message)})).finally((function(){return j(!1)})),d("dialogAddMessageForm"))}})]})})},ge="Dialogs_dialogs__DK6nC",he=r(9723),pe=function(e){var t=e.userID,r=e.dialogsPage,s=e.authUserID,n=e.authUserPhoto,a=e.requestMessages,i=e.sendMessage,o=e.reset,l=(0,he.k6)(),u=r;return(0,c.useEffect)((function(){u.dialogsData.length&&!t&&l.push("/dialogs/".concat(u.dialogsData[0].id))}),[u.dialogsData]),(0,_.jsxs)("div",{className:ge,children:[(0,_.jsx)(b,{state:u}),(0,_.jsx)(me,{state:u,userID:t,authUserPhoto:n,authUserID:s,requestMessages:a,sendMessage:i,reset:o})]})},ve=r(7375),ye=r(2789),_e=r(2932),je=r(6159),xe=r(2381),be=function(e){(0,o.Z)(r,e);var t=(0,l.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.props.requestDialogs()}},{key:"render",value:function(){var e=+this.props.match.params.userID;return(0,_.jsxs)(_.Fragment,{children:[this.props.isFetching?(0,_.jsx)(je.p,{}):null,(0,_.jsx)(pe,(0,n.Z)({userID:e},this.props))]})}}]),r}(c.Component),we=(0,ye.qC)((0,ve.$j)((function(e){return{dialogsPage:e.dialogsPage,authUserID:e.auth.id,authUserPhoto:e.auth.photo,isFetching:e.app.isFetching}}),{requestDialogs:u.pY,requestMessages:u.$4,sendMessage:u.bG,reset:xe.mc}),he.EN,_e.D)(be)},1117:function(e,t,r){r.d(t,{gx:function(){return f},II:function(){return m},Gr:function(){return g}});var s=r(8489),n=r(3738),a=r(6139),i=r(9234),o=(r(2791),r(9191)),l=r(184),u=["input","meta"],c=["input","meta"],d=function(e){e.input;var t=e.meta,r=t.touched,s=t.error,n=e.children,a=r&&s;return(0,l.jsxs)("div",{className:i.Z.formControl+" "+(a?i.Z.error:""),children:[(0,l.jsx)("div",{children:n}),a&&(0,l.jsx)("span",{children:s})]})},f=function(e){var t=e.input,r=(e.meta,(0,n.Z)(e,u));return(0,l.jsx)(d,(0,s.Z)((0,s.Z)({},e),{},{children:(0,l.jsx)(o.Z,(0,s.Z)((0,s.Z)({},t),r))}))},m=function(e){var t=e.input,r=(e.meta,(0,n.Z)(e,c));return(0,l.jsx)(d,(0,s.Z)((0,s.Z)({},e),{},{children:(0,l.jsx)("input",(0,s.Z)((0,s.Z)({},t),r))}))},g=function(e,t,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return(0,l.jsx)(a.Z,(0,s.Z)({placeholder:e,name:t,type:r,validate:n,component:i},o))}},2932:function(e,t,r){r.d(t,{D:function(){return h}});var s=r(8489),n=r(3738),a=r(7853),i=r(4531),o=r(1020),l=r(804),u=r(2791),c=r(9723),d=r(7375),f=r(184),m=["isAuth"],g=function(e){return{isAuth:e.auth.isAuth}};function h(e){var t=function(t){(0,o.Z)(u,t);var r=(0,l.Z)(u);function u(){return(0,a.Z)(this,u),r.apply(this,arguments)}return(0,i.Z)(u,[{key:"render",value:function(){var t=this.props,r=t.isAuth,a=(0,n.Z)(t,m);return r?(0,f.jsx)(e,(0,s.Z)({},a)):(0,f.jsx)(c.l_,{to:"/login"})}}]),u}(u.Component);return(0,d.$j)(g)(t)}},4286:function(e,t,r){r.d(t,{Yy:function(){return s},Wn:function(){return n},md:function(){return a}});var s=function(e){var t=new Date(e),r=Math.abs(t.getTimezoneOffset());return t.setMinutes(t.getMinutes()+r),t},n=function(e){return new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})},a=function(e){return new Date(e).toLocaleTimeString("en-GB",{hour:"numeric",minute:"numeric",hour12:!1})}},9234:function(e,t){t.Z={formControl:"FormsControls_formControl__7Kujw",error:"FormsControls_error__VtPjP",formSummaryError:"FormsControls_formSummaryError__u1JdX"}}}]);
//# sourceMappingURL=259.87b0f6bb.chunk.js.map